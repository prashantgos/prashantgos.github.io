(function($){$.fn.flatDesign=function(options){var MULTI_SELECT_CLASS="flat-select-multi";var SELECTED_OPTION_CLASS="flat-select-option-selected";var DISABLED_OPTION_CLASS="flat-select-option-disabled";if(arguments.length===0||typeof arguments[0]==="object"){options=$.extend(true,{title:"",class:"",multi:false,change:null,custom:false,selected:true},options);var $elements=[];this.each(function(){var $this=$(this);var $options=$this.find("option");var $selected=$options.filter(":selected");var $current=($selected.length)?$selected.first():$options.first();if(!options.selected){$current=null;}var html="";html+='<div class="flat-select-container '+$this.attr("class")+' '+options.class+' '+(options.multi?MULTI_SELECT_CLASS:"")+'">';html+='<div class="flat-select">';html+='<span>'+(options.title||$this.attr("title")||$current.text())+'</span>';html+='<i class="flat-select-arrow"></i>';html+='<i class="flat-select-check"></i>';html+='</div>';html+='<div class="flat-select-options">';if(options.custom){html+=$this.html();}else{$options.each(function(){var $this=$(this);var disabled=$this.attr("disabled")?DISABLED_OPTION_CLASS:"";var selected=$this.attr("selected")&&options.selected?SELECTED_OPTION_CLASS:"";html+='<div class="flat-select-option '+selected+' '+disabled+'" data-value="'+$this.val()+'">';html+=encodeForHTML($this.text());if(options.multi){html+='<i class="flat-select-arrow"></i>';}html+='</div>';});}html+='</div>';html+='</div>';var $el=$(html).addClass(options.class);var $select=$el.find(".flat-select").on("click",function(){$(".flat-select-active").not(this).removeClass("flat-select-active");$(this).toggleClass("flat-select-active");});$el.find(".flat-select-option").on("click",function(){var $this=$(this);if(!$this.hasClass(DISABLED_OPTION_CLASS)){if(options.multi){$this.toggleClass(SELECTED_OPTION_CLASS);}else{$select.removeClass("flat-select-active").find("span").text($this.text());$el.find("."+SELECTED_OPTION_CLASS).removeClass(SELECTED_OPTION_CLASS);$this.addClass(SELECTED_OPTION_CLASS);}if(options.change)options.change($this);$el.trigger("change",[$this]);}});$this.parent().append($el);$this.remove();$elements.push($el);});return $elements;}else if(typeof arguments[0]==="string"){if(arguments[0]==="value"){if(this.hasClass("flat-select-multi")){return this.find("."+SELECTED_OPTION_CLASS).map(function(){return $(this).attr("data-value");}).toArray();}else{return this.find("."+SELECTED_OPTION_CLASS).attr("data-value");}}else if(arguments[0]==="option"){return this.find("."+SELECTED_OPTION_CLASS);}}};}(jQuery));